<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Pinterest</title>
<link href="../style/common.css" rel="stylesheet" type="text/css">
</head>

<style type="text/css">
* {
	margin:0;
	padding:0;
}
body {
	background:url(../images/beige_paper.png);
	font-family:"Microsoft Yahei";
	font-size:0.8em;
	color:#999;
}

#container {
	width:100%;
	height:100%;
}
/*这里准备加上不同的相册*/
footer
{
	margin:0;
	padding:0;
	position:fixed;
	bottom:0;
	width:100%;
	height:90px;
	text-align:center;
}
#columns
{
	-webkit-column-count: 3;
	-webkit-column-gap: 10px;
	-webkit-column-fill: auto;
}
.pin
{
	display: inline-block;
	background: #FEFEFE;
	border: 2px solid #FAFAFA;
	box-shadow: 0 1px 2px rgba(34, 25, 25, 0.4);
	margin: 0 2px 15px;
	-webkit-column-break-inside: avoid;
	-moz-column-break-inside: avoid;
	column-break-inside: avoid;
	padding: 5px;
	background: -webkit-linear-gradient(45deg, #FFF, #F9F9F9);
	opacity: 1;
	position:relative;
	-webkit-transition: all .2s ease;
}
.pin img.img {
	width: 100%;
}
.pin .img_info
{
	padding:5px 0;
}
.pin .img_info em
{
	color:#000;
}
.pin .img_info span
{
	margin:0 3px;
}
@media (min-width: 960px) {
	#columns {
		-webkit-column-count: 4;
		-moz-column-count: 4;
		column-count: 4;
	}
}

@media (min-width: 1100px) {
	#columns {
		-webkit-column-count: 5;
		-moz-column-count: 5;
		column-count: 5;
	}
}
#columns:hover .pin:not(:hover) {
	opacity: 0.4;
}

.album
{
	width:100px;
	color:#fff;
	float:left;
	position:relative;
	overflow:hidden;
	margin:2px;
	opacity:0.5;
	-webkit-transition:all .3s ease-in-out;
}
.album:hover
{
	opacity:1;
}
.album img
{
	border:2px solid #ddd;
	border-radius:10px;
}
.album:hover img
{
	border-color:#fff;
}
.album .album_title
{
	position:absolute;
	top:40%;
	left:40%;
	text-shadow:1px 1px 1px rgba(0,0,0,0.5);
	
}
.hide_arrow,.show_arrow
{
	font-size:5em;
	position:fixed;
	bottom:0;
	z-index:999;
	letter-spacing:-10px;
}
.hide_arrow{
	right:0;
}
.show_arrow{left:0;display:none;background:rgba(0,0,0,.5);}
</style>
<script src="../js/jquery.js" type="text/javascript"></script>
<script src="../js/jquery.exif.js" type="text/javascript"></script>
<script src="../js/jquery.lazyload.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(
		function()
		{
			$(".album").click(function()
			{
				 var vision = $(this).attr("vision");
				 var count = $(this).attr("count");
				 init_img(vision,count);
			});
			$(".album").eq(0).click();
		}
	);
	function showAhide(show,hide)
	{
		$(show).show();
		$(hide).hide();
		$("footer").toggle("slow");
	}
	function show_album()
	{
		showAhide(".hide_arrow",".show_arrow");
	}
	function hide_album()
	{
		showAhide(".show_arrow",".hide_arrow");
	}
	var init_img = function(vision,count)
	{
		$('#columns').html("");
		for( i=1;i<=count;++i )
		{
			var pin = $('<div></div>',{'class':'pin'}) ;
			var img_src = 'photos/'+vision+'/'+i+'.jpg' ;
			
			
			var img = $('<img />',{'src':'../images/loading.gif','data-original': img_src,'class':'lazy img'});
			pin.append(img);
			var img_info ="<div class='img_info'></div>" ;
			pin.append(img_info);
			$('#columns').append(pin);
		}
		mylazy();
	};
	var mylazy = function()
	{
		$("img.lazy").lazyload({
	            effect : "fadeIn",
				load : function()
				{
				    setPhoto_info(this);
				},
		});	
	}
	function setPhoto_info(ele)
	{
		
		//获取图片的Exif信息
		var info = "" ;
		var model = "" ; 
		var fnumber = "" ;
		var time = "" ;
		var iso = "" ; 
		var $this = $(ele).exifLoad(function()
		{
			//这里还可以获取更多的参数，参见exif的信息格式 
			model = $this.exif("Model");
			if(model == "") model = "无"; 
			fnumber = $this.exif("FNumber");
			if(fnumber == "") fnumber = "无"; 
			time = $this.exif("ExposureTime");
			if(time == "") time = "无";
			else
			{
				if( time<1 ) time = "1/" + Math. round(1/time) ;
		     	else time += "s" ;
			}
			iso = $this.exif("ISOSpeedRatings");
			if(iso == "") iso = "无"; 
			
			
			var img_info = "<span>型号:<em class='model'>"+model+"</em></span>"+
			"<span>光圈:<em class='fNumber'>"+fnumber+"</em></span>"+
			"<br /><span>快门:<em class='ex_time'>"+time+"</em></span>"+
			"<span>ISO:<em class='iso'>"+iso+"</em></span>";
			$(ele).parent().find(".img_info").html(img_info);
		});
	}
</script>
<body>
<div id="container">
  <div id="columns">
    
  </div>
</div>
<footer>
        <div class="album" vision="建筑" count="29">
            <img src="photos/icon/5.jpg" />
            <span class="album_title">建筑</span>
        </div>
        <div class="album" vision="人像" count="105">
            <img src="photos/icon/3.jpg" />
            <span class="album_title">人像</span>
        </div>
        <div class="album" vision="自然" count="69">
            <img src="photos/icon/1.jpg" />
            <span class="album_title">自然</span>
        </div>
        <div class="album" vision="风光" count="1">
            <img src="photos/icon/2.jpg" />
            <span class="album_title">风光</span>
        </div>
        <div class="album" vision="随写" count="20">
            <img src="photos/icon/4.jpg" />
            <span class="album_title">随写</span>
        </div>
</footer>
<span class="hide_arrow" onClick="hide_album();">&lt;&lt;</span>
<span class="show_arrow" onClick="show_album();">&gt;&gt;</span>
</body>
</html>