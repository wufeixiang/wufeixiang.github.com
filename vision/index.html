<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Pinterest</title>
</head>
<style type="text/css">
* {
	margin:0;
	padding:0;
}
body {
	background:url(../images/beige_paper.png);
	font-family:"Microsoft Yahei";
	font-size:0.8em;
	color:#999;
}

#container {
	width:100%;
	height:100%;
}
/*这里准备加上不同的相册*/
footer
{
	
}
#columns
{
	-webkit-column-count: 3;
	-webkit-column-gap: 10px;
	-webkit-column-fill: auto;
}
.pin
{
	display: inline-block;
	background: #FEFEFE;
	border: 2px solid #FAFAFA;
	box-shadow: 0 1px 2px rgba(34, 25, 25, 0.4);
	margin: 0 2px 15px;
	-webkit-column-break-inside: avoid;
	-moz-column-break-inside: avoid;
	column-break-inside: avoid;
	padding: 5px;
	background: -webkit-linear-gradient(45deg, #FFF, #F9F9F9);
	opacity: 1;
	position:relative;
	-webkit-transition: all .2s ease;
}
.pin img.img {
	width: 100%;
}
.pin .img_info
{
	padding:5px 0;
}
.pin .img_info em
{
	color:#000;
}
.pin .img_info span
{
	margin:0 3px;
}
@media (min-width: 960px) {
	#columns {
		-webkit-column-count: 4;
		-moz-column-count: 4;
		column-count: 4;
	}
}

@media (min-width: 1100px) {
	#columns {
		-webkit-column-count: 5;
		-moz-column-count: 5;
		column-count: 5;
	}
}
#columns:hover .pin:not(:hover) {
	opacity: 0.4;
}

</style>
<script src="../js/jquery.js" type="text/javascript"></script>
<script src="../js/jquery.exif.js" type="text/javascript"></script>
<script src="../js/jquery.lazyload.js" type="text/javascript"></script>
<script type="text/javascript">
	$(document).ready(
		function()
		{
			count = 19 ; 
			var defaultVision = "建筑"
			for( i=1;i<count;++i )
			{
				var pin = $('<div></div>',{'class':'pin'}) ;
				var img_src = 'photos/'+defaultVision+'/'+i+'.jpg' ;
				
				
			    var img = $('<img />',{'src':'../images/loading.gif','data-original': img_src,'class':'lazy img'});
				pin.append(img);
				var img_info ="<div class='img_info'><img src='../images/loading.gif' /></div>" ;
				pin.append(img_info);
				$('#columns').append(pin);
			}
			
			mylazy();
		}
	);
	
	var mylazy = function()
	{
		$("img.lazy").lazyload({
	            effect : "fadeIn",
				load : function()
				{
				    setPhoto_info(this);
				},
		});	
	}
	function setPhoto_info(ele)
	{
		//获取图片的Exif信息
		var info = "" ;
		var model = "" ; 
		var fnumber = "" ;
		var time = "" ;
		var iso = "" ; 
		var $this = $(ele).exifLoad(function()
		{
			//这里还可以获取更多的参数，参见exif的信息格式 
			model = $this.exif("Model");
			fnumber = $this.exif("FNumber");
			time = $this.exif("ExposureTime");
			iso = $this.exif("ISOSpeedRatings");
			
			if( time<1 ) time = "1/" + Math. round(1/time) ;
			else time += "s" ;
			
			var img_info = "<span>型号:<em class='model'>"+model+"</em></span>"+
			"<span>光圈:<em class='fNumber'>"+fnumber+"</em></span>"+
			"<br /><span>快门:<em class='ex_time'>"+time+"</em></span>"+
			"<span>ISO:<em class='iso'>"+iso+"</em></span>";
			$(ele).parent().find(".img_info").html(img_info);
		});
	}
</script>
<body>
<div id="container">
  <div id="columns">
    
  </div>
</div>
<footer></footer>
</body>
</html>